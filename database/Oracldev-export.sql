--------------------------------------------------------
--  File created - Thursday-August-24-2017   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Type OBJ_DANHSACHDH
--------------------------------------------------------

  CREATE OR REPLACE TYPE "ADMIN"."OBJ_DANHSACHDH" AS OBJECT
( 
        MA_DONDATHANG NUMBER ,
        TENKHACHHANG NVARCHAR2(100),
        TONGTG NUMBER ,
        NGAYTAODDH DATE 
);


/
--------------------------------------------------------
--  DDL for Type OBJ_DANHSACHSP
--------------------------------------------------------

  CREATE OR REPLACE TYPE "ADMIN"."OBJ_DANHSACHSP" AS OBJECT
( 
        MA_SANPHAM NUMBER ,
        MA_LOAISP NUMBER,
        TENSANPHAM NVARCHAR2(100),
        GIABAN NUMBER ,
        GIAKM NUMBER ,
        MOTASP NCLOB ,
        ANHSANPHAM VARCHAR2(100),
        TRANGTHAIKM CHAR(1) ,
        TRANGTHAIHOT CHAR(1),
        TRANGTHAITOPWEEK CHAR(1),
        NGAYTAOSP DATE,
        URL VARCHAR2(100),
        TRANGTHAIBAN CHAR(1)     
);


/
--------------------------------------------------------
--  DDL for Type TYPE_DH
--------------------------------------------------------

  CREATE OR REPLACE TYPE "ADMIN"."TYPE_DH" AS TABLE OF obj_DanhSachDH;


/
--------------------------------------------------------
--  DDL for Type TYPE_SP
--------------------------------------------------------

  CREATE OR REPLACE TYPE "ADMIN"."TYPE_SP" AS TABLE OF obj_DanhSachSP;


/
--------------------------------------------------------
--  DDL for Table CHITIETDDH
--------------------------------------------------------

  CREATE TABLE "ADMIN"."CHITIETDDH" 
   (	"MA_SANPHAM" NUMBER, 
	"MA_DONDATHANG" NUMBER, 
	"SOLUONG" NUMBER, 
	"THANHTIEN" NUMBER, 
	"GIAKHMUA" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table CHITIETTAG
--------------------------------------------------------

  CREATE TABLE "ADMIN"."CHITIETTAG" 
   (	"MA_TAG" NUMBER, 
	"MA_SANPHAM" NUMBER
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table DONDATHANG
--------------------------------------------------------

  CREATE TABLE "ADMIN"."DONDATHANG" 
   (	"MA_DONDATHANG" NUMBER, 
	"MA_NHANVIEN" NUMBER, 
	"MA_KHACHHANG" NUMBER, 
	"MA_TTDDH" NUMBER, 
	"HTGIAOHANG" NUMBER, 
	"TONGTG" NUMBER, 
	"NGAYTAODDH" DATE, 
	"TENNGUOINHAN" NVARCHAR2(250), 
	"DIACHINGUOINHAN" NVARCHAR2(250), 
	"SDTNGUOINHAN" VARCHAR2(11 BYTE), 
	"GHICHU" NVARCHAR2(250)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table HOADON
--------------------------------------------------------

  CREATE TABLE "ADMIN"."HOADON" 
   (	"MA_HOADON" NUMBER, 
	"MA_DONDATHANG" NUMBER, 
	"MA_NHANVIEN" NUMBER, 
	"MA_TTHD" NUMBER, 
	"NGAYTAOHD" DATE, 
	"NGAYGIAOHD" DATE, 
	"GHICHUHD" NVARCHAR2(100), 
	"MST" VARCHAR2(10 BYTE), 
	"TENCONGTY" NVARCHAR2(250), 
	"DIACHICONTY" NVARCHAR2(250)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table KHACHHANG
--------------------------------------------------------

  CREATE TABLE "ADMIN"."KHACHHANG" 
   (	"MA_KHACHHANG" NUMBER, 
	"TENKHACHHANG" NVARCHAR2(100), 
	"TENDANGNHAPKH" VARCHAR2(100 BYTE), 
	"MATKHAUKH" VARCHAR2(100 BYTE), 
	"DIENTHOAI" VARCHAR2(11 BYTE), 
	"DIACHI" NVARCHAR2(100), 
	"EMAIL" VARCHAR2(100 BYTE), 
	"GIOITINHKH" CHAR(1 BYTE), 
	"NGAYSINHKH" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table LOAISP
--------------------------------------------------------

  CREATE TABLE "ADMIN"."LOAISP" 
   (	"MA_LOAISP" NUMBER, 
	"TENLOAI" NVARCHAR2(20), 
	"URL" VARCHAR2(100 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table NHANVIEN
--------------------------------------------------------

  CREATE TABLE "ADMIN"."NHANVIEN" 
   (	"MA_NHANVIEN" NUMBER, 
	"MA_QUYEN" NUMBER, 
	"TENDANGNHAPNV" VARCHAR2(30 BYTE), 
	"MATKHAUNV" VARCHAR2(30 BYTE), 
	"ANHDAIDIEN" VARCHAR2(30 BYTE), 
	"EMAIL" VARCHAR2(30 BYTE), 
	"TENNHANVIEN" NVARCHAR2(100), 
	"NGAYSINH" DATE, 
	"PHAI" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table QUYEN
--------------------------------------------------------

  CREATE TABLE "ADMIN"."QUYEN" 
   (	"MA_QUYEN" NUMBER, 
	"TENQUYEN" NVARCHAR2(100)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table SANPHAM
--------------------------------------------------------

  CREATE TABLE "ADMIN"."SANPHAM" 
   (	"MA_SANPHAM" NUMBER, 
	"MA_LOAISP" NUMBER, 
	"TENSANPHAM" NVARCHAR2(100), 
	"GIABAN" NUMBER, 
	"GIAKM" NUMBER, 
	"MOTASP" NCLOB, 
	"ANHSANPHAM" VARCHAR2(100 BYTE), 
	"TRANGTHAIKM" VARCHAR2(1 BYTE), 
	"TRANGTHAIHOT" VARCHAR2(1 BYTE), 
	"TRANGTHAITOPWEEK" VARCHAR2(1 BYTE), 
	"NGAYTAOSP" DATE, 
	"URL" VARCHAR2(100 BYTE), 
	"TRANGTHAIBAN" VARCHAR2(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" 
 LOB ("MOTASP") STORE AS BASICFILE (
  TABLESPACE "USERS" ENABLE STORAGE IN ROW CHUNK 8192 RETENTION 
  NOCACHE LOGGING 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)) ;
--------------------------------------------------------
--  DDL for Table TAG
--------------------------------------------------------

  CREATE TABLE "ADMIN"."TAG" 
   (	"MA_TAG" NUMBER, 
	"TENTAG" NVARCHAR2(20)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table THONGTINWEBSITE
--------------------------------------------------------

  CREATE TABLE "ADMIN"."THONGTINWEBSITE" 
   (	"MA_THONGTIN" NUMBER, 
	"LOGO" VARCHAR2(100 BYTE), 
	"HOTLINE" VARCHAR2(15 BYTE), 
	"FACEBOOK" NVARCHAR2(100), 
	"LINK_FACEBOOK" VARCHAR2(100 BYTE), 
	"THOIGIANMOCUA" VARCHAR2(100 BYTE), 
	"DIACHI" NVARCHAR2(100), 
	"EMAIL" VARCHAR2(30 BYTE), 
	"TENWEBSITE" NVARCHAR2(100), 
	"MOTATRANGWEB" NVARCHAR2(100)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table TRANGTHAIDDH
--------------------------------------------------------

  CREATE TABLE "ADMIN"."TRANGTHAIDDH" 
   (	"MA_TTDDH" NUMBER, 
	"TENTRANGTHAI" NVARCHAR2(100)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table TRANGTHAIHD
--------------------------------------------------------

  CREATE TABLE "ADMIN"."TRANGTHAIHD" 
   (	"MA_TTHD" NUMBER, 
	"TENTTHD" NVARCHAR2(100)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Sequence DONDATHANG_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "ADMIN"."DONDATHANG_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence HOADON_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "ADMIN"."HOADON_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence KHACHHANG_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "ADMIN"."KHACHHANG_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 41 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence LOAISP_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "ADMIN"."LOAISP_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 81 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence NHANVIEN_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "ADMIN"."NHANVIEN_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence QUYEN_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "ADMIN"."QUYEN_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SANPHAM_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "ADMIN"."SANPHAM_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 81 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence SEQUENCE_AUTOID
--------------------------------------------------------

   CREATE SEQUENCE  "ADMIN"."SEQUENCE_AUTOID"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence TAG_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "ADMIN"."TAG_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence TRANGTHAIDDH_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "ADMIN"."TRANGTHAIDDH_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE ;
--------------------------------------------------------
--  DDL for Sequence TRANGTHAIHD_SEQ
--------------------------------------------------------

   CREATE SEQUENCE  "ADMIN"."TRANGTHAIHD_SEQ"  MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE ;
REM INSERTING into ADMIN.CHITIETDDH
SET DEFINE OFF;
Insert into ADMIN.CHITIETDDH (MA_SANPHAM,MA_DONDATHANG,SOLUONG,THANHTIEN,GIAKHMUA) values (1,1,2,40000,20000);
Insert into ADMIN.CHITIETDDH (MA_SANPHAM,MA_DONDATHANG,SOLUONG,THANHTIEN,GIAKHMUA) values (2,2,2,40000,20000);
Insert into ADMIN.CHITIETDDH (MA_SANPHAM,MA_DONDATHANG,SOLUONG,THANHTIEN,GIAKHMUA) values (3,3,4,80000,20000);
Insert into ADMIN.CHITIETDDH (MA_SANPHAM,MA_DONDATHANG,SOLUONG,THANHTIEN,GIAKHMUA) values (4,4,3,60000,20000);
Insert into ADMIN.CHITIETDDH (MA_SANPHAM,MA_DONDATHANG,SOLUONG,THANHTIEN,GIAKHMUA) values (5,5,4,80000,20000);
Insert into ADMIN.CHITIETDDH (MA_SANPHAM,MA_DONDATHANG,SOLUONG,THANHTIEN,GIAKHMUA) values (1,2,1,20000,20000);
REM INSERTING into ADMIN.CHITIETTAG
SET DEFINE OFF;
Insert into ADMIN.CHITIETTAG (MA_TAG,MA_SANPHAM) values (1,1);
Insert into ADMIN.CHITIETTAG (MA_TAG,MA_SANPHAM) values (2,2);
Insert into ADMIN.CHITIETTAG (MA_TAG,MA_SANPHAM) values (3,3);
REM INSERTING into ADMIN.DONDATHANG
SET DEFINE OFF;
Insert into ADMIN.DONDATHANG (MA_DONDATHANG,MA_NHANVIEN,MA_KHACHHANG,MA_TTDDH,HTGIAOHANG,TONGTG,NGAYTAODDH,TENNGUOINHAN,DIACHINGUOINHAN,SDTNGUOINHAN,GHICHU) values (1,3,1,5,1,234000,to_date('05-08-2017','DD-MM-YYYY'),'Sơn đoàn','đâu đó việt nam','0987654321','ahihi');
Insert into ADMIN.DONDATHANG (MA_DONDATHANG,MA_NHANVIEN,MA_KHACHHANG,MA_TTDDH,HTGIAOHANG,TONGTG,NGAYTAODDH,TENNGUOINHAN,DIACHINGUOINHAN,SDTNGUOINHAN,GHICHU) values (2,2,2,5,1,60000,to_date('03-07-2017','DD-MM-YYYY'),null,null,null,null);
Insert into ADMIN.DONDATHANG (MA_DONDATHANG,MA_NHANVIEN,MA_KHACHHANG,MA_TTDDH,HTGIAOHANG,TONGTG,NGAYTAODDH,TENNGUOINHAN,DIACHINGUOINHAN,SDTNGUOINHAN,GHICHU) values (3,1,1,3,1,300000,to_date('05-08-2017','DD-MM-YYYY'),null,null,null,null);
Insert into ADMIN.DONDATHANG (MA_DONDATHANG,MA_NHANVIEN,MA_KHACHHANG,MA_TTDDH,HTGIAOHANG,TONGTG,NGAYTAODDH,TENNGUOINHAN,DIACHINGUOINHAN,SDTNGUOINHAN,GHICHU) values (4,2,2,2,2,234000,to_date('05-08-2017','DD-MM-YYYY'),null,null,null,null);
Insert into ADMIN.DONDATHANG (MA_DONDATHANG,MA_NHANVIEN,MA_KHACHHANG,MA_TTDDH,HTGIAOHANG,TONGTG,NGAYTAODDH,TENNGUOINHAN,DIACHINGUOINHAN,SDTNGUOINHAN,GHICHU) values (5,1,1,1,2,234000,to_date('04-08-2017','DD-MM-YYYY'),null,null,null,null);
REM INSERTING into ADMIN.HOADON
SET DEFINE OFF;
Insert into ADMIN.HOADON (MA_HOADON,MA_DONDATHANG,MA_NHANVIEN,MA_TTHD,NGAYTAOHD,NGAYGIAOHD,GHICHUHD,MST,TENCONGTY,DIACHICONTY) values (1,1,1,1,to_date('05-08-2017','DD-MM-YYYY'),to_date('05-08-2017','DD-MM-YYYY'),'Giao trong giờ hành chánh',null,null,null);
Insert into ADMIN.HOADON (MA_HOADON,MA_DONDATHANG,MA_NHANVIEN,MA_TTHD,NGAYTAOHD,NGAYGIAOHD,GHICHUHD,MST,TENCONGTY,DIACHICONTY) values (2,2,1,2,to_date('05-08-2017','DD-MM-YYYY'),to_date('05-08-2017','DD-MM-YYYY'),'Giao trong giờ hành chánh',null,null,null);
Insert into ADMIN.HOADON (MA_HOADON,MA_DONDATHANG,MA_NHANVIEN,MA_TTHD,NGAYTAOHD,NGAYGIAOHD,GHICHUHD,MST,TENCONGTY,DIACHICONTY) values (3,3,1,1,to_date('05-08-2017','DD-MM-YYYY'),to_date('05-08-2017','DD-MM-YYYY'),'Giao trong giờ hành chánh',null,null,null);
Insert into ADMIN.HOADON (MA_HOADON,MA_DONDATHANG,MA_NHANVIEN,MA_TTHD,NGAYTAOHD,NGAYGIAOHD,GHICHUHD,MST,TENCONGTY,DIACHICONTY) values (25,5,3,1,to_date('21-08-2017','DD-MM-YYYY'),to_date('29-08-2017','DD-MM-YYYY'),'nulllll','12345678','chưa biết','kakak');
REM INSERTING into ADMIN.KHACHHANG
SET DEFINE OFF;
Insert into ADMIN.KHACHHANG (MA_KHACHHANG,TENKHACHHANG,TENDANGNHAPKH,MATKHAUKH,DIENTHOAI,DIACHI,EMAIL,GIOITINHKH,NGAYSINHKH) values (1,'Trần Minh Đức','ductm','123','01225037723','1183/65 phạm thế hiển','kiemtheq8pmanh@gmail.com','F',to_date('27-12-1993','DD-MM-YYYY'));
Insert into ADMIN.KHACHHANG (MA_KHACHHANG,TENKHACHHANG,TENDANGNHAPKH,MATKHAUKH,DIENTHOAI,DIACHI,EMAIL,GIOITINHKH,NGAYSINHKH) values (2,'Đoàn Văn Lam Sơn','sondvl','123','01225037724','1183/65 phạm thế hiển','kiemtheq8pmanh@gmail.com','F',to_date('28-12-1993','DD-MM-YYYY'));
Insert into ADMIN.KHACHHANG (MA_KHACHHANG,TENKHACHHANG,TENDANGNHAPKH,MATKHAUKH,DIENTHOAI,DIACHI,EMAIL,GIOITINHKH,NGAYSINHKH) values (21,'AAAA','asa','123','0987654321','dsad a sasd as','dad@dsadas','F',to_date('17-03-1995','DD-MM-YYYY'));
REM INSERTING into ADMIN.LOAISP
SET DEFINE OFF;
Insert into ADMIN.LOAISP (MA_LOAISP,TENLOAI,URL) values (1,'Bánh ngọt','banh-ngot');
Insert into ADMIN.LOAISP (MA_LOAISP,TENLOAI,URL) values (2,'Pizaa','pizaa');
Insert into ADMIN.LOAISP (MA_LOAISP,TENLOAI,URL) values (3,'Đồ ăn nhẹ','do-an-nhe');
Insert into ADMIN.LOAISP (MA_LOAISP,TENLOAI,URL) values (4,'Bánh kem','banh-kem');
Insert into ADMIN.LOAISP (MA_LOAISP,TENLOAI,URL) values (5,'Sandwich','sandwich');
REM INSERTING into ADMIN.NHANVIEN
SET DEFINE OFF;
Insert into ADMIN.NHANVIEN (MA_NHANVIEN,MA_QUYEN,TENDANGNHAPNV,MATKHAUNV,ANHDAIDIEN,EMAIL,TENNHANVIEN,NGAYSINH,PHAI) values (1,2,'kelkelkel1994','123',null,'minhducit1993@gmail.com','Trần Minh Đức',to_date('27-12-1993','DD-MM-YYYY'),'F');
Insert into ADMIN.NHANVIEN (MA_NHANVIEN,MA_QUYEN,TENDANGNHAPNV,MATKHAUNV,ANHDAIDIEN,EMAIL,TENNHANVIEN,NGAYSINH,PHAI) values (2,1,'admin','123',null,'minhducit1993@gmail.com','Lương Trần Hy Hiến',to_date('28-12-1993','DD-MM-YYYY'),'M');
Insert into ADMIN.NHANVIEN (MA_NHANVIEN,MA_QUYEN,TENDANGNHAPNV,MATKHAUNV,ANHDAIDIEN,EMAIL,TENNHANVIEN,NGAYSINH,PHAI) values (3,2,'sondoan1204','123',null,'sondoan1204@gmail.com','Đoàn Văn Lam Sơn',to_date('29-12-1993','DD-MM-YYYY'),'F');
REM INSERTING into ADMIN.QUYEN
SET DEFINE OFF;
Insert into ADMIN.QUYEN (MA_QUYEN,TENQUYEN) values (1,'admin');
Insert into ADMIN.QUYEN (MA_QUYEN,TENQUYEN) values (2,'nhanvien');
REM INSERTING into ADMIN.SANPHAM
SET DEFINE OFF;
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (61,1,'DRDRFGG GG GY',12345678,123,'post-52597-1160595569.ico','N','N','N',to_date('19-08-2017','DD-MM-YYYY'),'drdrfgg-gg-gy','N');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (62,1,'sơn 1234G HHHH ',3213,1,'2016-07-28.png','N','N','N',to_date('19-08-2017','DD-MM-YYYY'),'son-1234g-hhhh-','N');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (63,1,'sonnnnnnnnnnnnnnnnnnnnnnn',1111111111111,111,'2016-07-26 (2).png','N','N','N',to_date('19-08-2017','DD-MM-YYYY'),'sonnnnnnnnnnnnnnnnnnnnnnn','N');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (43,1,'aaa sơn đoàn dsad',2313123,123,'dsadassadasdad.jpg','Y','Y','Y',to_date('13-08-2017','DD-MM-YYYY'),'aaa-son-doan-dsad','N');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (1,2,'PIZZA NHÂN BÒ PHÔ MAI',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3QnVrcDcwNHBPMTA','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'pizza-nhan-bo-pho-mai','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (2,2,'PIZZA GÀ HẢI SẢN',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3WVBqUDM5dWFTcHc','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'pizza-ga-hai-san','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (3,2,'PIZZA GÀ ỚT XANH',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3WmFjdXJtcThQemM','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'pizza-ga-ot-xanh','N');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (4,4,'BÁNH MỨT KEM',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3dEo3MGxSM2NWWGs','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'banh-mut-kem','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (5,5,'BÁNH KEM BẠC HÀ',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3WXlyeTczZ01femc','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'banh-kem-bac-ha','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (6,5,'BÁNH KEM VANI DÂU',300000,20000,'https://drive.google.com/uc?id=0B7mgEjbAZEQ5azRKVHM2Q3hIZUU','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'banh-kem-vani-dau','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (7,4,'BÁNH NGỌT',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3a3dZZDBFNk4tcUk','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'banh-ngot','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (8,4,'MOCHI KEM TƯƠI',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3Y0NhZERGTW85UGM','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'mochi-kem-tuoi','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (9,4,'CHOCOLATE NHÂN KEM',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3QlJCUkpSenhZSzA','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'chocolate-nhan-kem','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (10,4,'CAKE WEET',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3eFV3dzg4cTdVeWs','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'cake-weet','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (11,4,'CUPCAKE BẠC HÀ',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3ZU5WUGpla21jVU0','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'cupcake-bac-ha','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (12,4,'CUPCAKE CHOCOLATE',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3WjNQdTJRdTJ0ZHM','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'cupcake-chocolate','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (13,4,'BÁNH VANI',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3OVphWC1wb0VrZm8','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'banh-vani','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (14,4,'CUPCAKE VANI DÂU',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3X2EtVFVBaVFxTTg','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'cupcake-vani-dau','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (15,1,'BÁNH HAMBURGER',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3NG1ieUJlQ2hnQ0U','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'banh-hamburger','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (16,2,'PIZZA ZĂM BÔNG',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3NFV5d011a1lONEE','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'pizza-zam-bong','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (17,2,'PIZZA XÚC XÍCH THẬP CẨM',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3VzBNR08zdW1lSEk','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'pizza-xuc-xich-thap-cam','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (18,2,'PIZZA HẢI SẢN',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3RlF5RVJBRUhDZkk','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'pizza-hai-san','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (19,2,'PIZZA THỊT HUN KHÓI',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3WTF6cjFiemF3X1U','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'pizza-thit-hun-khoi','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (20,3,'BÁNH TORRIJA',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3Ym5UQnNhMl95dmM','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'banh-torrija','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (21,1,'SANDWICH TRỨNG',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3Q1lRTmFYUHFFeTQ','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'sandwich-trung','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (22,1,'SANDWICH SADLAT',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3TW1kNk85T2RIYUE','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'sandwich-sadlat','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (23,1,'SANDWICH SADLAT THỊT BÒ',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3SzZfQ0VBaHZqTkU','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'sandwich-sadlat-thit-bo','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (24,1,'SANDWICH TRỨNG SỮA',300000,20000,'https://drive.google.com/uc?id=0B2xIzP693TX3cEFsZFd2Y0RuV00','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'sandwich-trung-sua','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (25,1,'banh mì sandwich',300000,20000,'https://drive.google.com/uc?id=0B4jrhIC7OaTiTXozR2VlRDhxVkU','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'banh-mi-sandwich','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (26,1,'banh sandwich',300000,20000,'Big-Hero-6-Animated-2015-Movie-HD-Wallpaper.jpg','Y','Y','Y',to_date('05-08-2017','DD-MM-YYYY'),'banh-sandwich','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (56,1,'banh sandwich 111',300000,20000,'1920x1080.jpg','Y','Y','Y',to_date('15-08-2017','DD-MM-YYYY'),'banh-sandwich-111','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (57,2,'chưa biết',300000,20000,'dasdsa.jpg','Y','Y','N',to_date('15-08-2017','DD-MM-YYYY'),'chua-biet','Y');
Insert into ADMIN.SANPHAM (MA_SANPHAM,MA_LOAISP,TENSANPHAM,GIABAN,GIAKM,ANHSANPHAM,TRANGTHAIKM,TRANGTHAIHOT,TRANGTHAITOPWEEK,NGAYTAOSP,URL,TRANGTHAIBAN) values (58,1,'ababababab',300000,20000,'Big-Hero-6-Wallpaper-big-hero-6-37679026-1280-720.png','Y','Y','N',to_date('15-08-2017','DD-MM-YYYY'),'ababababab','Y');
REM INSERTING into ADMIN.TAG
SET DEFINE OFF;
Insert into ADMIN.TAG (MA_TAG,TENTAG) values (1,'phômai');
Insert into ADMIN.TAG (MA_TAG,TENTAG) values (2,'pizza');
Insert into ADMIN.TAG (MA_TAG,TENTAG) values (3,'bò');
REM INSERTING into ADMIN.THONGTINWEBSITE
SET DEFINE OFF;
Insert into ADMIN.THONGTINWEBSITE (MA_THONGTIN,LOGO,HOTLINE,FACEBOOK,LINK_FACEBOOK,THOIGIANMOCUA,DIACHI,EMAIL,TENWEBSITE,MOTATRANGWEB) values (1,'logo.png','08-1800-1090','Voi Ăn Gà','https://www.facebook.com/minhduc.271293','7:00 am - 10:00 pm','475A Điện Biên Phủ - Phường 25 - Quận Bình Thạnh - Tp Hồ Chí Mính','sandwich@chianui.com','Sandwich Chía Núi','Sandwich Chía Núi.');
REM INSERTING into ADMIN.TRANGTHAIDDH
SET DEFINE OFF;
Insert into ADMIN.TRANGTHAIDDH (MA_TTDDH,TENTRANGTHAI) values (1,'Đang chờ xác nhận');
Insert into ADMIN.TRANGTHAIDDH (MA_TTDDH,TENTRANGTHAI) values (2,'Đã xác nhận ');
Insert into ADMIN.TRANGTHAIDDH (MA_TTDDH,TENTRANGTHAI) values (3,'Đang giao hàng');
Insert into ADMIN.TRANGTHAIDDH (MA_TTDDH,TENTRANGTHAI) values (4,'Giao hàng thành công');
Insert into ADMIN.TRANGTHAIDDH (MA_TTDDH,TENTRANGTHAI) values (5,'Hủy đơn hàng');
REM INSERTING into ADMIN.TRANGTHAIHD
SET DEFINE OFF;
Insert into ADMIN.TRANGTHAIHD (MA_TTHD,TENTTHD) values (1,'Đã xuất hóa đơn');
Insert into ADMIN.TRANGTHAIHD (MA_TTHD,TENTTHD) values (2,'Đã giao hóa đơn');
Insert into ADMIN.TRANGTHAIHD (MA_TTHD,TENTTHD) values (3,'Giao hóa đơn thành công');
--------------------------------------------------------
--  DDL for Trigger CHECK_EMAIL_KHACHHANG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."CHECK_EMAIL_KHACHHANG" BEFORE INSERT OR UPDATE OF "EMAIL" ON "ADMIN"."KHACHHANG" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
    IF 
    REGEXP_COUNT (:NEW.EMAIL, '@') != 1
    THEN
    RAISE_APPLICATION_ERROR (-20001, 'LỖI! EMAIL PHẢI ĐÚNG ĐỊNH DẠNG');
    END IF;
END;

/
ALTER TRIGGER "ADMIN"."CHECK_EMAIL_KHACHHANG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger CHECK_EMAIL_NHANVIEN
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."CHECK_EMAIL_NHANVIEN" BEFORE INSERT OR UPDATE OF "EMAIL" ON "ADMIN"."NHANVIEN" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
    IF 
    REGEXP_COUNT (:NEW.EMAIL, '@') != 1
    THEN
    RAISE_APPLICATION_ERROR (-20002, 'LỖI! EMAIL PHẢI ĐÚNG ĐỊNH DẠNG');
    END IF;
END;

/
ALTER TRIGGER "ADMIN"."CHECK_EMAIL_NHANVIEN" ENABLE;
--------------------------------------------------------
--  DDL for Trigger CHECK_KHUYENMAI
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."CHECK_KHUYENMAI" BEFORE INSERT OR UPDATE OF "GIAKM" ON "ADMIN"."SANPHAM" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
    IF 
    :NEW.GIAKM > :NEW.GIABAN OR
    :NEW.GIAKM > :OLD.GIABAN
    THEN
    RAISE_APPLICATION_ERROR (-20005, 'LOI! NHAP LAI, GIA KHUYEN MAI PHAI NHO HON GIA BÁN');
    END IF;
END;

/
ALTER TRIGGER "ADMIN"."CHECK_KHUYENMAI" ENABLE;
--------------------------------------------------------
--  DDL for Trigger CTHD_ADDPRICE
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."CTHD_ADDPRICE" BEFORE INSERT ON "ADMIN"."CHITIETDDH" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
  :NEW.GIAKHMUA:= GET_PRICE(:NEW.MA_SANPHAM);
END;
/
ALTER TRIGGER "ADMIN"."CTHD_ADDPRICE" ENABLE;
--------------------------------------------------------
--  DDL for Trigger CTHD_AUTOUPDATE
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."CTHD_AUTOUPDATE" BEFORE INSERT OR UPDATE ON "ADMIN"."CHITIETDDH" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
:new.THANHTIEN := :new.GIAKHMUA * :new.SOLUONG;
END;

/
ALTER TRIGGER "ADMIN"."CTHD_AUTOUPDATE" ENABLE;
--------------------------------------------------------
--  DDL for Trigger DONDATHANG_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."DONDATHANG_TRG" BEFORE INSERT ON "ADMIN"."DONDATHANG" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.MA_DONDATHANG IS NULL THEN
      SELECT DONDATHANG_SEQ.NEXTVAL INTO :NEW.MA_DONDATHANG FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;

/
ALTER TRIGGER "ADMIN"."DONDATHANG_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger DONDATHANG_TRG_NGAYTAO
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."DONDATHANG_TRG_NGAYTAO" BEFORE INSERT ON "ADMIN"."DONDATHANG" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
  :NEW.NGAYTAODDH := SYSDATE;
END;

/
ALTER TRIGGER "ADMIN"."DONDATHANG_TRG_NGAYTAO" ENABLE;
--------------------------------------------------------
--  DDL for Trigger HOADON_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."HOADON_TRG" BEFORE INSERT ON "ADMIN"."HOADON" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.MA_HOADON IS NULL THEN
      SELECT HOADON_SEQ.NEXTVAL INTO :NEW.MA_HOADON FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;

/
ALTER TRIGGER "ADMIN"."HOADON_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger HOADON_TRG_NGAYGIAOHD
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."HOADON_TRG_NGAYGIAOHD" BEFORE INSERT ON "ADMIN"."HOADON" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
    IF
      :NEW.NGAYGIAOHD<SYSDATE
    THEN
        RAISE_APPLICATION_ERROR (-20007, 'LOI! NGÀY GIAO >= NGAY HIỆN TẠI');
    END IF;
END;

/
ALTER TRIGGER "ADMIN"."HOADON_TRG_NGAYGIAOHD" ENABLE;
--------------------------------------------------------
--  DDL for Trigger HOADON_TRG_NGAYTAO
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."HOADON_TRG_NGAYTAO" BEFORE INSERT ON "ADMIN"."HOADON" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
  :NEW.NGAYTAOHD := SYSDATE;
END;

/
ALTER TRIGGER "ADMIN"."HOADON_TRG_NGAYTAO" ENABLE;
--------------------------------------------------------
--  DDL for Trigger KHACHHANG_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."KHACHHANG_TRG" BEFORE INSERT ON "ADMIN"."KHACHHANG" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.MA_KHACHHANG IS NULL THEN
      SELECT KHACHHANG_SEQ.NEXTVAL INTO :NEW.MA_KHACHHANG FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;

/
ALTER TRIGGER "ADMIN"."KHACHHANG_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger LOAISP_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."LOAISP_TRG" BEFORE INSERT ON "ADMIN"."LOAISP" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.MA_LOAISP IS NULL THEN
      SELECT LOAISP_SEQ.NEXTVAL INTO :NEW.MA_LOAISP FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;

/
ALTER TRIGGER "ADMIN"."LOAISP_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger LOAISP_TRG_URL
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."LOAISP_TRG_URL" BEFORE INSERT OR UPDATE ON "ADMIN"."LOAISP" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
  :NEW.URL := FN_CONVERT_TO_VN(:NEW.TENLOAI);
END;
/
ALTER TRIGGER "ADMIN"."LOAISP_TRG_URL" ENABLE;
--------------------------------------------------------
--  DDL for Trigger NHANVIEN_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."NHANVIEN_TRG" BEFORE INSERT ON "ADMIN"."NHANVIEN" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.MA_NHANVIEN IS NULL THEN
      SELECT NHANVIEN_SEQ.NEXTVAL INTO :NEW.MA_NHANVIEN FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;

/
ALTER TRIGGER "ADMIN"."NHANVIEN_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger NHANVIEN_TUOI
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."NHANVIEN_TUOI" BEFORE INSERT OR UPDATE OF "NGAYSINH" ON "ADMIN"."NHANVIEN" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
    IF
    GET_AGE(:NEW.NGAYSINH)<18 OR GET_AGE(:NEW.NGAYSINH)>60
    THEN
        RAISE_APPLICATION_ERROR (-20003, 'LOI! NHAP NGAY, TUOI PHAI TU 18 - 60');
    END IF;
END;
/
ALTER TRIGGER "ADMIN"."NHANVIEN_TUOI" ENABLE;
--------------------------------------------------------
--  DDL for Trigger QUYEN_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."QUYEN_TRG" BEFORE INSERT ON "ADMIN"."QUYEN" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.MA_QUYEN IS NULL THEN
      SELECT QUYEN_SEQ.NEXTVAL INTO :NEW.MA_QUYEN FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;

/
ALTER TRIGGER "ADMIN"."QUYEN_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger SANHAM_TRG_MOTA
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."SANHAM_TRG_MOTA" BEFORE INSERT OR UPDATE ON "ADMIN"."SANPHAM" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
    IF
        LENGTH(:NEW.MOTASP)<20
    THEN
        RAISE_APPLICATION_ERROR (-20006, 'LOI! NHAP LAI,MÔ TẢ PHẢI LỚN HƠN 20 KÝ TỰ');
    END IF;
END;

/
ALTER TRIGGER "ADMIN"."SANHAM_TRG_MOTA" ENABLE;
--------------------------------------------------------
--  DDL for Trigger SANPHAM_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."SANPHAM_TRG" BEFORE INSERT ON "ADMIN"."SANPHAM" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.MA_SANPHAM IS NULL THEN
      SELECT SANPHAM_SEQ.NEXTVAL INTO :NEW.MA_SANPHAM FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;

/
ALTER TRIGGER "ADMIN"."SANPHAM_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger SANPHAM_TRG_NGAYTAO
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."SANPHAM_TRG_NGAYTAO" BEFORE INSERT ON "ADMIN"."SANPHAM" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
  :NEW.NGAYTAOSP := SYSDATE;
END;

/
ALTER TRIGGER "ADMIN"."SANPHAM_TRG_NGAYTAO" ENABLE;
--------------------------------------------------------
--  DDL for Trigger SANPHAM_URL
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."SANPHAM_URL" BEFORE INSERT OR UPDATE ON "ADMIN"."SANPHAM" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
  :NEW.URL := FN_CONVERT_TO_VN(:NEW.TENSANPHAM);
END;
/
ALTER TRIGGER "ADMIN"."SANPHAM_URL" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TAG_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."TAG_TRG" BEFORE INSERT ON "ADMIN"."TAG" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.MA_TAG IS NULL THEN
      SELECT TAG_SEQ.NEXTVAL INTO :NEW.MA_TAG FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;

/
ALTER TRIGGER "ADMIN"."TAG_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TRANGTHAIDDH_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."TRANGTHAIDDH_TRG" BEFORE INSERT ON "ADMIN"."TRANGTHAIDDH" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.MA_TTDDH IS NULL THEN
      SELECT TRANGTHAIDDH_SEQ.NEXTVAL INTO :NEW.MA_TTDDH FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;

/
ALTER TRIGGER "ADMIN"."TRANGTHAIDDH_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger TRANGTHAIHD_TRG
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."TRANGTHAIHD_TRG" BEFORE INSERT ON "ADMIN"."TRANGTHAIHD" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.MA_TTHD IS NULL THEN
      SELECT TRANGTHAIHD_SEQ.NEXTVAL INTO :NEW.MA_TTHD FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;

/
ALTER TRIGGER "ADMIN"."TRANGTHAIHD_TRG" ENABLE;
--------------------------------------------------------
--  DDL for Trigger UNDELETE_TTWEB
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "ADMIN"."UNDELETE_TTWEB" BEFORE DELETE ON "ADMIN"."THONGTINWEBSITE" REFERENCING OLD AS "OLD" NEW AS "NEW" FOR EACH ROW BEGIN
    IF 
    :OLD.MA_THONGTIN = 1
    THEN
    RAISE_APPLICATION_ERROR (-20004, 'lỖI! KHÔNG DƯỢC XOÁ DỮ LIỆU');
    END IF;
END;

/
ALTER TRIGGER "ADMIN"."UNDELETE_TTWEB" ENABLE;
--------------------------------------------------------
--  DDL for Procedure PROC_CHITIET_DDH
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "ADMIN"."PROC_CHITIET_DDH" (X IN NUMBER,recordset OUT SYS_REFCURSOR) 
AS
begin
    OPEN recordset for
    SELECT *
	FROM
		DONDATHANG
	WHERE
		MA_DONDATHANG = X;
end;

/
--------------------------------------------------------
--  DDL for Procedure PROC_DANGNHAP_NV
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "ADMIN"."PROC_DANGNHAP_NV" (TENDN IN NVARCHAR2,PASS IN NVARCHAR2,recordset OUT SYS_REFCURSOR) 
AS
begin
    OPEN recordset for
    SELECT *
	FROM
		NHANVIEN
	WHERE
		TENDANGNHAPNV = TENDN AND MATKHAUNV= PASS;
end;

/
--------------------------------------------------------
--  DDL for Procedure PROC_DS6SP_BANCHAY
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "ADMIN"."PROC_DS6SP_BANCHAY" (recordset OUT SYS_REFCURSOR) 
AS
begin
    OPEN recordset for
               SELECT
            * 
        FROM
            (
        SELECT
            ADMIN.CHITIETDDH.MA_SANPHAM,
            ADMIN.SANPHAM.TENSANPHAM,
            ADMIN.LOAISP.TENLOAI,
            ADMIN.SANPHAM.ANHSANPHAM,
            Sum( ADMIN.CHITIETDDH.SOLUONG ) AS SOLUONG,
            Sum( ADMIN.CHITIETDDH.THANHTIEN ) AS THANHTIEN 
        FROM
            ADMIN.CHITIETDDH
            INNER JOIN ADMIN.SANPHAM ON ADMIN.CHITIETDDH.MA_SANPHAM = ADMIN.SANPHAM.MA_SANPHAM
            INNER JOIN ADMIN.LOAISP ON ADMIN.SANPHAM.MA_LOAISP = ADMIN.LOAISP.MA_LOAISP 
        GROUP BY
            ADMIN.CHITIETDDH.MA_SANPHAM,
            ADMIN.SANPHAM.TENSANPHAM,
            ADMIN.LOAISP.TENLOAI,
            ADMIN.SANPHAM.ANHSANPHAM 
        ORDER BY
            SOLUONG DESC 
            ) 
        WHERE
            ROWNUM <=6;
end;

/
--------------------------------------------------------
--  DDL for Procedure PROC_DSSP_KHONGBAN
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "ADMIN"."PROC_DSSP_KHONGBAN" (X IN NUMBER,recordset OUT SYS_REFCURSOR) 
AS
begin
            OPEN recordset for
                SELECT *
                FROM
                ADMIN.SANPHAM
                WHERE
                MA_LOAISP = X AND
                ADMIN.SANPHAM.TRANGTHAIBAN = 'N';
end;

/
--------------------------------------------------------
--  DDL for Procedure PROC_DSSP_LOAI
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "ADMIN"."PROC_DSSP_LOAI" (X IN NUMBER,recordset OUT SYS_REFCURSOR) 
AS
begin
    OPEN recordset for
    SELECT *
	FROM
		SANPHAM
	WHERE
		MA_LOAISP = X;
end;


/
--------------------------------------------------------
--  DDL for Procedure PROC_DS_HOADON
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "ADMIN"."PROC_DS_HOADON" (X IN NUMBER,recordset OUT SYS_REFCURSOR) 
AS
begin
    OPEN recordset for
    SELECT *
	FROM
		HOADON
	WHERE
		MA_TTHD = X;
end;

/
--------------------------------------------------------
--  DDL for Procedure PROC_DS_HOADON_NHANVIEN
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "ADMIN"."PROC_DS_HOADON_NHANVIEN" (Y IN NUMBER,recordset OUT SYS_REFCURSOR) 
AS
begin
    OPEN recordset for
    SELECT *
	FROM
		HOADON
	WHERE
		 MA_NHANVIEN=Y;
end;

/
--------------------------------------------------------
--  DDL for Procedure PROC_DS_ITEM_DH
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "ADMIN"."PROC_DS_ITEM_DH" (X IN NUMBER,recordset OUT SYS_REFCURSOR) 
AS
begin
    OPEN recordset for
    SELECT *
	FROM
		CHITIETDDH
	WHERE
		MA_DONDATHANG = X;
end;

/
--------------------------------------------------------
--  DDL for Procedure PROC_KHOIPHUCSP
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "ADMIN"."PROC_KHOIPHUCSP" (MA NUMBER)
IS
begin
    UPDATE SANPHAM SET TRANGTHAIBAN = 'Y' WHERE MA_SANPHAM=MA;
    COMMIT;
end;

/
--------------------------------------------------------
--  DDL for Procedure PROC_LAYSP_LOAITRUYENVAO
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "ADMIN"."PROC_LAYSP_LOAITRUYENVAO" (X IN VARCHAR2,recordset OUT SYS_REFCURSOR) 
AS
begin
    OPEN recordset for
    SELECT
		ADMIN.SANPHAM.MA_SANPHAM,
		ADMIN.SANPHAM.TENSANPHAM
	FROM
		ADMIN.LOAISP
		INNER JOIN ADMIN.SANPHAM ON ADMIN.SANPHAM.MA_LOAISP = ADMIN.LOAISP.MA_LOAISP
	WHERE
		ADMIN.LOAISP.URL = X;
end;


/
--------------------------------------------------------
--  DDL for Procedure PROC_SETDDH
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "ADMIN"."PROC_SETDDH" (MATT NUMBER,MADH NUMBER)
IS
begin
    UPDATE DONDATHANG SET MA_TTDDH = MATT WHERE MA_DONDATHANG=MADH;
    COMMIT;
end;

/
--------------------------------------------------------
--  DDL for Procedure PROC_THONGKE_LOAI
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "ADMIN"."PROC_THONGKE_LOAI" (recordset OUT SYS_REFCURSOR) 
AS
begin
    OPEN recordset for
    SELECT
        ADMIN.LOAISP.TENLOAI,
        Count(ADMIN.SANPHAM.MA_SANPHAM)
        FROM
        ADMIN.SANPHAM
        INNER JOIN ADMIN.LOAISP ON ADMIN.SANPHAM.MA_LOAISP = ADMIN.LOAISP.MA_LOAISP
        GROUP BY
        ADMIN.LOAISP.TENLOAI;
end;

/
--------------------------------------------------------
--  DDL for Procedure PROC_TIM_DDH
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "ADMIN"."PROC_TIM_DDH" (X IN NUMBER,recordset OUT SYS_REFCURSOR) 
AS
begin
    OPEN recordset for
        SELECT *
    FROM
        DONDATHANG
    WHERE
        MA_DONDATHANG=X;
end;

/
--------------------------------------------------------
--  DDL for Procedure PROC_TIM_SP
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "ADMIN"."PROC_TIM_SP" (X IN NVARCHAR2,recordset OUT SYS_REFCURSOR) 
AS
begin
    OPEN recordset for
        SELECT *
    FROM
    ADMIN.SANPHAM
    WHERE
    UPPER(ADMIN.SANPHAM.TENSANPHAM) LIKE '%'||UPPER(X)||'%';
end;

/
--------------------------------------------------------
--  DDL for Procedure PROC_TK_HD_NV
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "ADMIN"."PROC_TK_HD_NV" (recordset OUT SYS_REFCURSOR) 
AS
begin
    OPEN recordset for
   SELECT
Count(ADMIN.DONDATHANG.MA_DONDATHANG),
ADMIN.NHANVIEN.TENNHANVIEN
FROM
ADMIN.DONDATHANG
INNER JOIN ADMIN.NHANVIEN ON ADMIN.DONDATHANG.MA_NHANVIEN = ADMIN.NHANVIEN.MA_NHANVIEN

GROUP BY
ADMIN.NHANVIEN.TENNHANVIEN;
end;

/
--------------------------------------------------------
--  DDL for Procedure PROC_XOASP
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "ADMIN"."PROC_XOASP" (MA NUMBER)
IS
begin
    UPDATE SANPHAM SET TRANGTHAIBAN = 'N' WHERE MA_SANPHAM=MA;
    COMMIT;
end;

/
--------------------------------------------------------
--  DDL for Procedure Proc_LaySP_LoaiTruyenVao
--------------------------------------------------------
set define off;

  CREATE OR REPLACE PROCEDURE "ADMIN"."Proc_LaySP_LoaiTruyenVao" (X IN VARCHAR2,recordset OUT SYS_REFCURSOR) 
AS
    begin
    OPEN recordset for
    SELECT
		ADMIN.SANPHAM.MA_SANPHAM,
		ADMIN.SANPHAM.TENSANPHAM,
		ADMIN.SANPHAM.GIABAN,
		ADMIN.SANPHAM.GIAKM,
		ADMIN.SANPHAM.ANHSANPHAM,
		ADMIN.SANPHAM.TRANGTHAIKM,
		ADMIN.SANPHAM.URL,
		ADMIN.SANPHAM.TRANGTHAIBAN
	FROM
		ADMIN.LOAISP
		INNER JOIN ADMIN.SANPHAM ON ADMIN.SANPHAM.MA_LOAISP = ADMIN.LOAISP.MA_LOAISP
	WHERE
		ADMIN.LOAISP.URL = X;
  end;


/
--------------------------------------------------------
--  DDL for Package PACKAGE_FC_CHUNG
--------------------------------------------------------

  CREATE OR REPLACE PACKAGE "ADMIN"."PACKAGE_FC_CHUNG" 
AS 
    --package specification 
     FUNCTION  "GET_AGE" (DATEPUT IN DATE) RETURN NUMBER;
     FUNCTION  "GET_DAY" (DATEPUT IN DATE) RETURN NUMBER;
     FUNCTION  "GET_MONTH" (DATEPUT IN DATE) RETURN NUMBER;
     FUNCTION  "GET_YEAR" (DATEPUT IN DATE) RETURN NUMBER;
     FUNCTION  "FN_CONVERT_TO_VN" (STRINPUT IN NVARCHAR2) RETURN NVARCHAR2;
END PACKAGE_FC_CHUNG;

/
--------------------------------------------------------
--  DDL for Package PACKAGE_FC_DDH_HD
--------------------------------------------------------

  CREATE OR REPLACE PACKAGE "ADMIN"."PACKAGE_FC_DDH_HD" 
AS 
    --package specification 
     FUNCTION         "GET_SL_DH"  RETURN NUMBER;
     FUNCTION         "GET_TTG_DDH" RETURN NUMBER;
     FUNCTION  "XUAT_HOADON" (MADDH number,MANV NUMBER,NGAYGIAO DATE,GHICHU NVARCHAR2,
                            MSOTHUE varchar2,TENCT NVARCHAR2,DIACHI NVARCHAR2)
                        return number;
END PACKAGE_FC_DDH_HD;

/
--------------------------------------------------------
--  DDL for Package PACKAGE_FC_SANPHAM
--------------------------------------------------------

  CREATE OR REPLACE PACKAGE "ADMIN"."PACKAGE_FC_SANPHAM" 
AS 
    --package specification 
    FUNCTION         "DS_5DONHANG_MOI" RETURN TYPE_DH;
    FUNCTION         "GET_PRICE" (ID IN NUMBER) RETURN NUMBER;
    FUNCTION         "GET_SL_SP" RETURN NUMBER;
    FUNCTION         "NHAP_LOAISP" (name NVARCHAR2) return number;
    FUNCTION         "NHAP_SANPHAM" (maloai number,name NVARCHAR2,giaban number,giakm number,
                        mota NCLOB,anh varchar2,thkm in SANPHAM.TRANGTHAIKM%TYPE,thhot in SANPHAM.TRANGTHAIKM%TYPE, 
                        thtuan in SANPHAM.TRANGTHAIKM%TYPE, thban in SANPHAM.TRANGTHAIKM%TYPE)
                        return number;
    FUNCTION         "SP_THEO_URL" (URLPUT IN VARCHAR2) RETURN TYPE_SP;
    FUNCTION         "SUA_LOAISP" (idsp NUMBER,name NVARCHAR2) return number; 
    FUNCTION         "SUA_SANPHAM" (masp number,maloai number,name NVARCHAR2,
                                giaban number,giakm number,mota NCLOB,anh varchar2,
                                thkm in SANPHAM.TRANGTHAIKM%TYPE,thhot in SANPHAM.TRANGTHAIKM%TYPE, 
                                thtuan in SANPHAM.TRANGTHAIKM%TYPE, thban in SANPHAM.TRANGTHAIKM%TYPE)
                        return number;
END PACKAGE_FC_SANPHAM;

/
--------------------------------------------------------
--  DDL for Package PACKAGE_PROC_HD_DDH
--------------------------------------------------------

  CREATE OR REPLACE PACKAGE "ADMIN"."PACKAGE_PROC_HD_DDH" 
AS 
    --package specification 
    PROCEDURE         "PROC_CHITIET_DDH" (X IN NUMBER,recordset OUT SYS_REFCURSOR);
    PROCEDURE   "PROC_DS_HOADON" (X IN NUMBER,recordset OUT SYS_REFCURSOR) ;
    PROCEDURE         "PROC_DS_ITEM_DH" (X IN NUMBER,recordset OUT SYS_REFCURSOR) ;
    procedure PROC_SETDDH(MATT NUMBER,MADH NUMBER);

END PACKAGE_PROC_HD_DDH;

/
--------------------------------------------------------
--  DDL for Package PACKAGE_PROC_NV
--------------------------------------------------------

  CREATE OR REPLACE PACKAGE "ADMIN"."PACKAGE_PROC_NV" 
AS 
    --package specification 
    PROCEDURE   "PROC_DANGNHAP_NV" (TENDN IN NVARCHAR2,PASS IN NVARCHAR2,recordset OUT SYS_REFCURSOR) ;
    PROCEDURE   "PROC_DS_HOADON_NHANVIEN" (Y IN NUMBER,recordset OUT SYS_REFCURSOR);
END PACKAGE_PROC_NV;

/
--------------------------------------------------------
--  DDL for Package PACKAGE_PROC_SANPHAM
--------------------------------------------------------

  CREATE OR REPLACE PACKAGE "ADMIN"."PACKAGE_PROC_SANPHAM" 
AS 
    --package specification 
    PROCEDURE         "PROC_DS6SP_BANCHAY" (recordset OUT SYS_REFCURSOR) ;
    PROCEDURE   "PROC_DSSP_KHONGBAN" (X IN NUMBER,recordset OUT SYS_REFCURSOR) ;
    PROCEDURE         "PROC_DSSP_LOAI" (X IN NUMBER,recordset OUT SYS_REFCURSOR) ;
    procedure "PROC_KHOIPHUCSP"(MA IN NUMBER);
    PROCEDURE         "PROC_LAYSP_LOAITRUYENVAO" (X IN VARCHAR2,recordset OUT SYS_REFCURSOR) ;
    procedure "PROC_XOASP"(MA NUMBER);

END PACKAGE_PROC_SANPHAM;

/
--------------------------------------------------------
--  DDL for Package Body PACKAGE_FC_CHUNG
--------------------------------------------------------

  CREATE OR REPLACE PACKAGE BODY "ADMIN"."PACKAGE_FC_CHUNG" 
AS 
    --package body 
    FUNCTION "GET_AGE" (DATEPUT IN DATE)
    RETURN NUMBER
    IS AGEGET NUMBER;
    BEGIN
    AGEGET:=TRUNC((SYSDATE - TO_DATE(DATEPUT))/ 365.25);
    RETURN AGEGET;
    END;

    FUNCTION "GET_DAY" (DATEPUT IN DATE)
    RETURN NUMBER
    IS DATEGET NUMBER;
    BEGIN
    DATEGET:=Extract(DAY from DATEPUT);
    RETURN DATEGET;
    END;

    FUNCTION "GET_MONTH" (DATEPUT IN DATE)
    RETURN NUMBER
    IS DATEGET NUMBER;
    BEGIN
    DATEGET:=Extract(MONTH from DATEPUT);
    RETURN DATEGET;
    END;

    FUNCTION "GET_YEAR" (DATEPUT IN DATE)
    RETURN NUMBER
    IS DATEGET NUMBER;
    BEGIN
    DATEGET:=Extract(YEAR from DATEPUT);
    RETURN DATEGET;
    END;

    FUNCTION "FN_CONVERT_TO_VN" (STRINPUT IN NVARCHAR2)
    RETURN NVARCHAR2
    IS STRCONVERT NVARCHAR2(100);
    BEGIN
    STRCONVERT := TRANSLATE(
                               STRINPUT,
                               'áàảãạăắằẳẵặâấầẩẫậđéèẻẽẹêếềểễệíìỉĩịóòỏõọôốồổỗộơớờởỡợúùủũụưứừửữựýỳỷỹỵÁÀẢÃẠĂẮẰẲẴẶÂẤẦẨẪẬĐÉÈẺẼẸÊẾỀỂỄỆÍÌỈĨỊÓÒỎÕỌÔỐỒỔỖỘƠỚỜỞỠỢÚÙỦŨỤƯỨỪỬỮỰÝỲỶỸỴ QWERTYUIOPASDFGHJKLZXCVBNM',
                               'aaaaaaaaaaaaaaaaadeeeeeeeeeeeiiiiiooooooooooooooooouuuuuuuuuuuyyyyyaaaaaaaaaaaaaaaaadeeeeeeeeeeeiiiiiooooooooooooooooouuuuuuuuuuuyyyyy-qwertyuiopasdfghjklzxcvbnm'
                             );
    RETURN STRCONVERT;
    END;

END PACKAGE_FC_CHUNG;

/
--------------------------------------------------------
--  DDL for Package Body PACKAGE_FC_DDH_HD
--------------------------------------------------------

  CREATE OR REPLACE PACKAGE BODY "ADMIN"."PACKAGE_FC_DDH_HD" 
AS 
    --package BODY
     
    
        FUNCTION         "GET_SL_DH" 
    RETURN NUMBER
    IS DH NUMBER;
    BEGIN
        SELECT
        COUNT(ADMIN.DONDATHANG.MA_DONDATHANG)INTO DH
        FROM
        ADMIN.DONDATHANG;
    RETURN DH;
    END;

     FUNCTION         "GET_TTG_DDH" 
    RETURN NUMBER
    IS TTG NUMBER;
    BEGIN
        SELECT
        SUM(ADMIN.DONDATHANG.TONGTG) INTO TTG
        FROM
        ADMIN.DONDATHANG;
    RETURN TTG;
    END;

    FUNCTION  XUAT_HOADON (MADDH number,MANV NUMBER,NGAYGIAO DATE,GHICHU NVARCHAR2,MSOTHUE varchar2,TENCT NVARCHAR2,DIACHI NVARCHAR2)
    return number
    as
      RS Number:=0;
    begin
        begin
        INSERT INTO "ADMIN"."HOADON" (MA_DONDATHANG, MA_NHANVIEN, MA_TTHD, NGAYGIAOHD, GHICHUHD, MST, TENCONGTY, DIACHICONTY) VALUES (MADDH, MANV, '1', NGAYGIAO, GHICHU, MSOTHUE, TENCT, DIACHI);
        Exception WHEN DUP_VAL_ON_INDEX THEN RS:=1;
        END;
    return RS;
    end;

END PACKAGE_FC_DDH_HD;

/
--------------------------------------------------------
--  DDL for Package Body PACKAGE_FC_SANPHAM
--------------------------------------------------------

  CREATE OR REPLACE PACKAGE BODY "ADMIN"."PACKAGE_FC_SANPHAM" 
AS 
    --package specification 
        FUNCTION         "DS_5DONHANG_MOI" 
    RETURN TYPE_DH
    IS 
    fn_DH TYPE_DH := TYPE_DH();
    BEGIN
            FOR item IN (SELECT * FROM(SELECT
                        ADMIN .DONDATHANG.MA_DONDATHANG,
                        ADMIN .KHACHHANG.TENKHACHHANG,
                        ADMIN .DONDATHANG.TONGTG,
                        ADMIN .DONDATHANG.NGAYTAODDH
                    FROM
                        ADMIN .DONDATHANG
                    INNER JOIN ADMIN .NHANVIEN ON ADMIN .DONDATHANG.MA_NHANVIEN = ADMIN .NHANVIEN.MA_NHANVIEN
                    INNER JOIN ADMIN .KHACHHANG ON ADMIN .DONDATHANG.MA_KHACHHANG = ADMIN .KHACHHANG.MA_KHACHHANG
                    ORDER BY
                        ADMIN .DONDATHANG.NGAYTAODDH DESC)
                        WHERE ROWNUM <=5 )
            LOOP
            fn_DH.extend;
            fn_DH(fn_DH.Last) := obj_DanhSachDH(    item.MA_DONDATHANG, 
                                                    item.TENKHACHHANG,
                                                    item.TONGTG,
                                                    item.NGAYTAODDH
                                                );
            END LOOP;                                                                                       
    RETURN fn_DH;
    END;


         FUNCTION         "GET_PRICE" (ID IN NUMBER)
    RETURN NUMBER
    IS
        PRICE NUMBER;
        ST CHAR(1);
        P1 NUMBER;
        P2 NUMBER;
    BEGIN
        SELECT TRANGTHAIKM INTO ST FROM SANPHAM WHERE SANPHAM.MA_SANPHAM=ID;
        SELECT GIABAN INTO P1 FROM SANPHAM WHERE SANPHAM.MA_SANPHAM=ID;
        SELECT GIAKM INTO P2 FROM SANPHAM WHERE SANPHAM.MA_SANPHAM=ID;
        IF
            ST='N'
        THEN     
            PRICE := P1;
        ELSE
            PRICE := P2;
        END IF;
    RETURN PRICE;
    END;

    FUNCTION         "GET_SL_SP" 
    RETURN NUMBER
    IS SP NUMBER;
    BEGIN
        SELECT
        COUNT(ADMIN.SANPHAM.MA_SANPHAM)INTO SP
        FROM
        ADMIN.SANPHAM;
    RETURN SP;
    END;

    FUNCTION         "NHAP_LOAISP" (name NVARCHAR2)
    return number
    as
      RS Number:=0;
    begin
        begin
            Insert into LOAISP (TENLOAI) values (name);
            Exception WHEN DUP_VAL_ON_INDEX THEN RS:=1;
        END;
    return RS;
    end Nhap_LoaiSp;


    FUNCTION         "NHAP_SANPHAM" (maloai number,name NVARCHAR2,giaban number,
                    giakm number,mota NCLOB,anh varchar2,thkm in SANPHAM.TRANGTHAIKM%TYPE,
                    thhot in SANPHAM.TRANGTHAIKM%TYPE, thtuan in SANPHAM.TRANGTHAIKM%TYPE, 
                    thban in SANPHAM.TRANGTHAIKM%TYPE)
    return number
    as
      RS Number:=0;
    begin
        begin
            INSERT INTO SANPHAM (MA_LOAISP, TENSANPHAM, GIABAN, GIAKM, MOTASP, ANHSANPHAM, TRANGTHAIKM, TRANGTHAIHOT, TRANGTHAITOPWEEK, TRANGTHAIBAN) VALUES (maloai, name, giaban, giakm, mota, anh, thkm, thhot, thtuan, thban);
            Exception WHEN DUP_VAL_ON_INDEX THEN RS:=1;
        END;
    return RS;
    end Nhap_SanPham;


        FUNCTION         "SP_THEO_URL" (URLPUT IN VARCHAR2)
    RETURN TYPE_SP
    IS 
    fn_SP TYPE_SP := TYPE_SP();
    BEGIN
        IF (URLPUT IS NULL)
            THEN
            FOR item IN (SELECT
                            ADMIN.SANPHAM.MA_SANPHAM,
                            ADMIN.SANPHAM.MA_LOAISP,
                            ADMIN.SANPHAM.TENSANPHAM,
                            ADMIN.SANPHAM.GIABAN,
                            ADMIN.SANPHAM.GIAKM,
                            ADMIN.SANPHAM.MOTASP,
                            ADMIN.SANPHAM.ANHSANPHAM,
                            ADMIN.SANPHAM.TRANGTHAIKM,
                            ADMIN.SANPHAM.TRANGTHAIHOT,
                            ADMIN.SANPHAM.TRANGTHAITOPWEEK,
                            ADMIN.SANPHAM.NGAYTAOSP,
                            ADMIN.SANPHAM.URL,
                            ADMIN.SANPHAM.TRANGTHAIBAN
                            FROM
                            ADMIN.SANPHAM
                            )
            LOOP
            fn_SP.extend;
            fn_SP(fn_SP.Last) := obj_DanhSachSP(    item.MA_SANPHAM, 
                                                    item.MA_LOAISP,
                                                    item.TENSANPHAM,
                                                    item.GIABAN,
                                                    item.GIAKM,
                                                    item.MOTASP,
                                                    item.ANHSANPHAM,
                                                    item.TRANGTHAIKM,
                                                    item.TRANGTHAIHOT,
                                                    item.TRANGTHAITOPWEEK,
                                                    item.NGAYTAOSP,
                                                    item.URL,
                                                    item.TRANGTHAIBAN
                                                   );
            END LOOP;
            ELSE
            FOR item IN (SELECT
                        ADMIN.SANPHAM.MA_SANPHAM,
                        ADMIN.SANPHAM.MA_LOAISP,
                        ADMIN.SANPHAM.TENSANPHAM,
                        ADMIN.SANPHAM.GIABAN,
                        ADMIN.SANPHAM.GIAKM,
                        ADMIN.SANPHAM.MOTASP,
                        ADMIN.SANPHAM.ANHSANPHAM,
                        ADMIN.SANPHAM.TRANGTHAIKM,
                        ADMIN.SANPHAM.TRANGTHAIHOT,
                        ADMIN.SANPHAM.TRANGTHAITOPWEEK,
                        ADMIN.SANPHAM.NGAYTAOSP,
                        ADMIN.SANPHAM.URL,
                        ADMIN.SANPHAM.TRANGTHAIBAN
                        FROM
                        ADMIN.SANPHAM
                        INNER JOIN ADMIN.LOAISP ON ADMIN.SANPHAM.MA_LOAISP = ADMIN.LOAISP.MA_LOAISP
                        WHERE
                        ADMIN.LOAISP.URL=URLPUT)
            LOOP
            fn_SP.extend;
            fn_SP(fn_SP.Last) := obj_DanhSachSP(    item.MA_SANPHAM, 
                                                    item.MA_LOAISP,
                                                    item.TENSANPHAM,
                                                    item.GIABAN,
                                                    item.GIAKM,
                                                    item.MOTASP,
                                                    item.ANHSANPHAM,
                                                    item.TRANGTHAIKM,
                                                    item.TRANGTHAIHOT,
                                                    item.TRANGTHAITOPWEEK,
                                                    item.NGAYTAOSP,
                                                    item.URL,
                                                    item.TRANGTHAIBAN
                                                   );
            END LOOP;                                                                                       
        END IF;
    RETURN fn_SP;
    END;

        FUNCTION         "SUA_LOAISP" (idsp NUMBER,name NVARCHAR2)
    return number
    as
      RS Number:=0;
    begin
        begin
            UPDATE LOAISP SET TENLOAI = name WHERE MA_LOAISP=idsp;
            Exception WHEN DUP_VAL_ON_INDEX THEN RS:=1;
        END;
    return RS;
    end Sua_LoaiSp; 


        FUNCTION         "SUA_SANPHAM" (masp number,maloai number,name NVARCHAR2,giaban number,giakm number,mota NCLOB,anh varchar2,thkm in SANPHAM.TRANGTHAIKM%TYPE,thhot in SANPHAM.TRANGTHAIKM%TYPE, thtuan in SANPHAM.TRANGTHAIKM%TYPE, thban in SANPHAM.TRANGTHAIKM%TYPE)
    return number
    as
      RS Number:=0;
    begin
        begin
            UPDATE SANPHAM SET
            MA_LOAISP=maloai, TENSANPHAM = name, GIABAN=giaban, GIAKM=giakm, MOTASP=mota, ANHSANPHAM=anh, TRANGTHAIKM=thkm, TRANGTHAIHOT=thhot, TRANGTHAITOPWEEK=thtuan, TRANGTHAIBAN =thban
            WHERE MA_SANPHAM=masp;
            Exception WHEN DUP_VAL_ON_INDEX THEN RS:=1;
        END;
    return RS;
    end Sua_SanPham;


END PACKAGE_FC_SANPHAM;

/
--------------------------------------------------------
--  DDL for Package Body PACKAGE_PROC_HD_DDH
--------------------------------------------------------

  CREATE OR REPLACE PACKAGE BODY "ADMIN"."PACKAGE_PROC_HD_DDH" 
AS 
    --package specification 
        PROCEDURE         "PROC_CHITIET_DDH" (X IN NUMBER,recordset OUT SYS_REFCURSOR) 
    AS
    begin
        OPEN recordset for
        SELECT *
        FROM
            DONDATHANG
        WHERE
            MA_DONDATHANG = X;
    end;

    PROCEDURE   "PROC_DS_HOADON" (X IN NUMBER,recordset OUT SYS_REFCURSOR) 
    AS
    begin
        OPEN recordset for
        SELECT *
        FROM
            HOADON
        WHERE
            MA_TTHD = X;
    end;

    PROCEDURE         "PROC_DS_ITEM_DH" (X IN NUMBER,recordset OUT SYS_REFCURSOR) 
    AS
    begin
        OPEN recordset for
        SELECT *
        FROM
            CHITIETDDH
        WHERE
            MA_DONDATHANG = X;
    end;

    procedure PROC_SETDDH(MATT NUMBER,MADH NUMBER)
    IS
    begin
        UPDATE DONDATHANG SET MA_TTDDH = MATT WHERE MA_DONDATHANG=MADH;
        COMMIT;
    end;

END PACKAGE_PROC_HD_DDH;

/
--------------------------------------------------------
--  DDL for Package Body PACKAGE_PROC_NV
--------------------------------------------------------

  CREATE OR REPLACE PACKAGE BODY "ADMIN"."PACKAGE_PROC_NV" 
AS 
    --package body 
       PROCEDURE   "PROC_DANGNHAP_NV" (TENDN IN NVARCHAR2,PASS IN NVARCHAR2,recordset OUT SYS_REFCURSOR) 
    AS
    begin
        OPEN recordset for
        SELECT *
        FROM
            NHANVIEN
        WHERE
            TENDANGNHAPNV = TENDN AND MATKHAUNV= PASS;
    end;


        PROCEDURE   "PROC_DS_HOADON_NHANVIEN" (Y IN NUMBER,recordset OUT SYS_REFCURSOR) 
    AS
    begin
        OPEN recordset for
        SELECT *
        FROM
            HOADON
        WHERE
             MA_NHANVIEN=Y;
    end;

END PACKAGE_PROC_NV;

/
--------------------------------------------------------
--  DDL for Package Body PACKAGE_PROC_SANPHAM
--------------------------------------------------------

  CREATE OR REPLACE PACKAGE BODY "ADMIN"."PACKAGE_PROC_SANPHAM" 
AS 
    --package specification 
        PROCEDURE         "PROC_DS6SP_BANCHAY" (recordset OUT SYS_REFCURSOR) 
    AS
    begin
        OPEN recordset for
                   SELECT
                * 
            FROM
                (
            SELECT
                ADMIN.CHITIETDDH.MA_SANPHAM,
                ADMIN.SANPHAM.TENSANPHAM,
                ADMIN.LOAISP.TENLOAI,
                ADMIN.SANPHAM.ANHSANPHAM,
                Sum( ADMIN.CHITIETDDH.SOLUONG ) AS SOLUONG,
                Sum( ADMIN.CHITIETDDH.THANHTIEN ) AS THANHTIEN 
            FROM
                ADMIN.CHITIETDDH
                INNER JOIN ADMIN.SANPHAM ON ADMIN.CHITIETDDH.MA_SANPHAM = ADMIN.SANPHAM.MA_SANPHAM
                INNER JOIN ADMIN.LOAISP ON ADMIN.SANPHAM.MA_LOAISP = ADMIN.LOAISP.MA_LOAISP 
            GROUP BY
                ADMIN.CHITIETDDH.MA_SANPHAM,
                ADMIN.SANPHAM.TENSANPHAM,
                ADMIN.LOAISP.TENLOAI,
                ADMIN.SANPHAM.ANHSANPHAM 
            ORDER BY
                SOLUONG DESC 
                ) 
            WHERE
                ROWNUM <=6;
    end;

        PROCEDURE   "PROC_DSSP_KHONGBAN" (X IN NUMBER,recordset OUT SYS_REFCURSOR) 
    AS
    begin
                OPEN recordset for
                    SELECT *
                    FROM
                    ADMIN.SANPHAM
                    WHERE
                    MA_LOAISP = X AND
                    ADMIN.SANPHAM.TRANGTHAIBAN = 'N';
    end;

        PROCEDURE         "PROC_DSSP_LOAI" (X IN NUMBER,recordset OUT SYS_REFCURSOR) 
    AS
    begin
        OPEN recordset for
        SELECT *
        FROM
            SANPHAM
        WHERE
            MA_LOAISP = X;
    end;

        procedure PROC_KHOIPHUCSP(MA NUMBER)
    IS
    begin
        UPDATE SANPHAM SET TRANGTHAIBAN = 'Y' WHERE MA_SANPHAM=MA;
        COMMIT;
    end;

        PROCEDURE         "PROC_LAYSP_LOAITRUYENVAO" (X IN VARCHAR2,recordset OUT SYS_REFCURSOR) 
    AS
    begin
        OPEN recordset for
        SELECT
            ADMIN.SANPHAM.MA_SANPHAM,
            ADMIN.SANPHAM.TENSANPHAM
        FROM
            ADMIN.LOAISP
            INNER JOIN ADMIN.SANPHAM ON ADMIN.SANPHAM.MA_LOAISP = ADMIN.LOAISP.MA_LOAISP
        WHERE
            ADMIN.LOAISP.URL = X;
    end;

        procedure PROC_XOASP(MA NUMBER)
    IS
    begin
        UPDATE SANPHAM SET TRANGTHAIBAN = 'N' WHERE MA_SANPHAM=MA;
        COMMIT;
    end;


END PACKAGE_PROC_SANPHAM;

/
--------------------------------------------------------
--  DDL for Function DS_5DONHANG_MOI
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."DS_5DONHANG_MOI" 
RETURN TYPE_DH
IS 
fn_DH TYPE_DH := TYPE_DH();
BEGIN
        FOR item IN (SELECT * FROM(SELECT
                    ADMIN .DONDATHANG.MA_DONDATHANG,
                    ADMIN .KHACHHANG.TENKHACHHANG,
                    ADMIN .DONDATHANG.TONGTG,
                    ADMIN .DONDATHANG.NGAYTAODDH
                FROM
                    ADMIN .DONDATHANG
                INNER JOIN ADMIN .NHANVIEN ON ADMIN .DONDATHANG.MA_NHANVIEN = ADMIN .NHANVIEN.MA_NHANVIEN
                INNER JOIN ADMIN .KHACHHANG ON ADMIN .DONDATHANG.MA_KHACHHANG = ADMIN .KHACHHANG.MA_KHACHHANG
                ORDER BY
                    ADMIN .DONDATHANG.NGAYTAODDH DESC)
                    WHERE ROWNUM <=5 )
        LOOP
        fn_DH.extend;
        fn_DH(fn_DH.Last) := obj_DanhSachDH(    item.MA_DONDATHANG, 
                                                item.TENKHACHHANG,
                                                item.TONGTG,
                                                item.NGAYTAODDH
                                            );
        END LOOP;                                                                                       
RETURN fn_DH;
END;

/
--------------------------------------------------------
--  DDL for Function FN_CONVERT_TO_VN
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."FN_CONVERT_TO_VN" ( STRINPUT IN NVARCHAR2 )
	RETURN NVARCHAR2 IS STRCONVERT NVARCHAR2 ( 100 );
BEGIN
	STRCONVERT := TRANSLATE( STRINPUT, 'áàảãạăắằẳẵặâấầẩẫậđéèẻẽẹêếềểễệíìỉĩịóòỏõọôốồổỗộơớờởỡợúùủũụưứừửữựýỳỷỹỵÁÀẢÃẠĂẮẰẲẴẶÂẤẦẨẪẬĐÉÈẺẼẸÊẾỀỂỄỆÍÌỈĨỊÓÒỎÕỌÔỐỒỔỖỘƠỚỜỞỠỢÚÙỦŨỤƯỨỪỬỮỰÝỲỶỸỴ QWERTYUIOPASDFGHJKLZXCVBNM', 'aaaaaaaaaaaaaaaaadeeeeeeeeeeeiiiiiooooooooooooooooouuuuuuuuuuuyyyyyaaaaaaaaaaaaaaaaadeeeeeeeeeeeiiiiiooooooooooooooooouuuuuuuuuuuyyyyy-qwertyuiopasdfghjklzxcvbnm' );
RETURN STRCONVERT;
END;

/
--------------------------------------------------------
--  DDL for Function GET_AGE
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."GET_AGE" (DATEPUT IN DATE)
RETURN NUMBER
IS AGEGET NUMBER;
BEGIN
AGEGET:=TRUNC((SYSDATE - TO_DATE(DATEPUT))/ 365.25);
RETURN AGEGET;
END;


/
--------------------------------------------------------
--  DDL for Function GET_DAY
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."GET_DAY" (DATEPUT IN DATE)
RETURN NUMBER
IS DATEGET NUMBER;
BEGIN
DATEGET:=Extract(DAY from DATEPUT);
RETURN DATEGET;
END;


/
--------------------------------------------------------
--  DDL for Function GET_KH_ORDER
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."GET_KH_ORDER" 
RETURN NUMBER
IS KH NUMBER;
BEGIN
    SELECT
    COUNT(DISTINCT ADMIN.DONDATHANG.MA_KHACHHANG)INTO KH
    FROM
    ADMIN.DONDATHANG;
RETURN KH;
END;


/
--------------------------------------------------------
--  DDL for Function GET_MONTH
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."GET_MONTH" (DATEPUT IN DATE)
RETURN NUMBER
IS DATEGET NUMBER;
BEGIN
DATEGET:=Extract(MONTH from DATEPUT);
RETURN DATEGET;
END;


/
--------------------------------------------------------
--  DDL for Function GET_PRICE
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."GET_PRICE" (ID IN NUMBER)
RETURN NUMBER
IS
    PRICE NUMBER;
    ST CHAR(1);
    P1 NUMBER;
    P2 NUMBER;
BEGIN
    SELECT TRANGTHAIKM INTO ST FROM SANPHAM WHERE SANPHAM.MA_SANPHAM=ID;
    SELECT GIABAN INTO P1 FROM SANPHAM WHERE SANPHAM.MA_SANPHAM=ID;
    SELECT GIAKM INTO P2 FROM SANPHAM WHERE SANPHAM.MA_SANPHAM=ID;
    IF
        ST='N'
    THEN     
        PRICE := P1;
    ELSE
        PRICE := P2;
    END IF;
RETURN PRICE;
END;


/
--------------------------------------------------------
--  DDL for Function GET_SLHANGBAN
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."GET_SLHANGBAN" 
RETURN NUMBER
IS SL NUMBER;
BEGIN
SELECT
Sum(ADMIN.CHITIETDDH.MA_SANPHAM)INTO SL
FROM
ADMIN.CHITIETDDH;
RETURN SL;
END;

/
--------------------------------------------------------
--  DDL for Function GET_SL_DH
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."GET_SL_DH" 
RETURN NUMBER
IS DH NUMBER;
BEGIN
    SELECT
    COUNT(ADMIN.DONDATHANG.MA_DONDATHANG)INTO DH
    FROM
    ADMIN.DONDATHANG;
RETURN DH;
END;


/
--------------------------------------------------------
--  DDL for Function GET_SL_SP
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."GET_SL_SP" 
RETURN NUMBER
IS SP NUMBER;
BEGIN
    SELECT
    COUNT(ADMIN.SANPHAM.MA_SANPHAM)INTO SP
    FROM
    ADMIN.SANPHAM;
RETURN SP;
END;


/
--------------------------------------------------------
--  DDL for Function GET_TTG_DDH
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."GET_TTG_DDH" 
RETURN NUMBER
IS TTG NUMBER;
BEGIN
    SELECT
    SUM(ADMIN.DONDATHANG.TONGTG) INTO TTG
    FROM
    ADMIN.DONDATHANG;
RETURN TTG;
END;


/
--------------------------------------------------------
--  DDL for Function GET_YEAR
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."GET_YEAR" (DATEPUT IN DATE)
RETURN NUMBER
IS DATEGET NUMBER;
BEGIN
DATEGET:=Extract(YEAR from DATEPUT);
RETURN DATEGET;
END;


/
--------------------------------------------------------
--  DDL for Function NHAP_LOAISP
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."NHAP_LOAISP" (name NVARCHAR2)
return number
as
  RS Number:=0;
begin
    begin
        Insert into LOAISP (TENLOAI) values (name)
        RETURNING MA_LOAISP INTO RS;
        Exception WHEN DUP_VAL_ON_INDEX THEN RS:=1;
    END;
return RS;
end Nhap_LoaiSp;

/
--------------------------------------------------------
--  DDL for Function NHAP_SANPHAM
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."NHAP_SANPHAM" (maloai number,name NVARCHAR2,giaban number,giakm number,mota NCLOB,anh varchar2,thkm in SANPHAM.TRANGTHAIKM%TYPE,thhot in SANPHAM.TRANGTHAIKM%TYPE, thtuan in SANPHAM.TRANGTHAIKM%TYPE, thban in SANPHAM.TRANGTHAIKM%TYPE)
return number
as
  RS Number:=0;
begin
    begin
        INSERT INTO SANPHAM (MA_LOAISP, TENSANPHAM, GIABAN, GIAKM, MOTASP, ANHSANPHAM, TRANGTHAIKM, TRANGTHAIHOT, TRANGTHAITOPWEEK, TRANGTHAIBAN) VALUES (maloai, name, giaban, giakm, mota, anh, thkm, thhot, thtuan, thban);
        Exception WHEN DUP_VAL_ON_INDEX THEN RS:=1;
    END;
return RS;
end Nhap_SanPham;


/
--------------------------------------------------------
--  DDL for Function SP_THEO_URL
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."SP_THEO_URL" (URLPUT IN VARCHAR2)
RETURN TYPE_SP
IS 
fn_SP TYPE_SP := TYPE_SP();
BEGIN
    IF (URLPUT IS NULL)
        THEN
        FOR item IN (SELECT
                        ADMIN.SANPHAM.MA_SANPHAM,
                        ADMIN.SANPHAM.MA_LOAISP,
                        ADMIN.SANPHAM.TENSANPHAM,
                        ADMIN.SANPHAM.GIABAN,
                        ADMIN.SANPHAM.GIAKM,
                        ADMIN.SANPHAM.MOTASP,
                        ADMIN.SANPHAM.ANHSANPHAM,
                        ADMIN.SANPHAM.TRANGTHAIKM,
                        ADMIN.SANPHAM.TRANGTHAIHOT,
                        ADMIN.SANPHAM.TRANGTHAITOPWEEK,
                        ADMIN.SANPHAM.NGAYTAOSP,
                        ADMIN.SANPHAM.URL,
                        ADMIN.SANPHAM.TRANGTHAIBAN
                        FROM
                        ADMIN.SANPHAM
                        )
        LOOP
        fn_SP.extend;
        fn_SP(fn_SP.Last) := obj_DanhSachSP(    item.MA_SANPHAM, 
                                                item.MA_LOAISP,
                                                item.TENSANPHAM,
                                                item.GIABAN,
                                                item.GIAKM,
                                                item.MOTASP,
                                                item.ANHSANPHAM,
                                                item.TRANGTHAIKM,
                                                item.TRANGTHAIHOT,
                                                item.TRANGTHAITOPWEEK,
                                                item.NGAYTAOSP,
                                                item.URL,
                                                item.TRANGTHAIBAN
                                               );
        END LOOP;
        ELSE
        FOR item IN (SELECT
                    ADMIN.SANPHAM.MA_SANPHAM,
                    ADMIN.SANPHAM.MA_LOAISP,
                    ADMIN.SANPHAM.TENSANPHAM,
                    ADMIN.SANPHAM.GIABAN,
                    ADMIN.SANPHAM.GIAKM,
                    ADMIN.SANPHAM.MOTASP,
                    ADMIN.SANPHAM.ANHSANPHAM,
                    ADMIN.SANPHAM.TRANGTHAIKM,
                    ADMIN.SANPHAM.TRANGTHAIHOT,
                    ADMIN.SANPHAM.TRANGTHAITOPWEEK,
                    ADMIN.SANPHAM.NGAYTAOSP,
                    ADMIN.SANPHAM.URL,
                    ADMIN.SANPHAM.TRANGTHAIBAN
                    FROM
                    ADMIN.SANPHAM
                    INNER JOIN ADMIN.LOAISP ON ADMIN.SANPHAM.MA_LOAISP = ADMIN.LOAISP.MA_LOAISP
                    WHERE
                    ADMIN.LOAISP.URL=URLPUT)
        LOOP
        fn_SP.extend;
        fn_SP(fn_SP.Last) := obj_DanhSachSP(    item.MA_SANPHAM, 
                                                item.MA_LOAISP,
                                                item.TENSANPHAM,
                                                item.GIABAN,
                                                item.GIAKM,
                                                item.MOTASP,
                                                item.ANHSANPHAM,
                                                item.TRANGTHAIKM,
                                                item.TRANGTHAIHOT,
                                                item.TRANGTHAITOPWEEK,
                                                item.NGAYTAOSP,
                                                item.URL,
                                                item.TRANGTHAIBAN
                                               );
        END LOOP;                                                                                       
    END IF;
RETURN fn_SP;
END;


/
--------------------------------------------------------
--  DDL for Function SUA_LOAISP
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."SUA_LOAISP" (idsp NUMBER,name NVARCHAR2)
return number
as
  RS Number:=0;
begin
    begin
        UPDATE LOAISP SET TENLOAI = name WHERE MA_LOAISP=idsp;
        Exception WHEN DUP_VAL_ON_INDEX THEN RS:=1;
    END;
return RS;
end Sua_LoaiSp;


/
--------------------------------------------------------
--  DDL for Function SUA_SANPHAM
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."SUA_SANPHAM" (masp number,maloai number,name NVARCHAR2,giaban number,giakm number,mota NCLOB,anh varchar2,thkm in SANPHAM.TRANGTHAIKM%TYPE,thhot in SANPHAM.TRANGTHAIKM%TYPE, thtuan in SANPHAM.TRANGTHAIKM%TYPE, thban in SANPHAM.TRANGTHAIKM%TYPE)
return number
as
  RS Number:=0;
begin
    begin
        UPDATE SANPHAM SET
        MA_LOAISP=maloai, TENSANPHAM = name, GIABAN=giaban, GIAKM=giakm, MOTASP=mota, ANHSANPHAM=anh, TRANGTHAIKM=thkm, TRANGTHAIHOT=thhot, TRANGTHAITOPWEEK=thtuan, TRANGTHAIBAN =thban
        WHERE MA_SANPHAM=masp;
        Exception WHEN DUP_VAL_ON_INDEX THEN RS:=1;
    END;
return RS;
end Sua_SanPham;


/
--------------------------------------------------------
--  DDL for Function XUAT_HOADON
--------------------------------------------------------

  CREATE OR REPLACE FUNCTION "ADMIN"."XUAT_HOADON" (MADDH number,MANV NUMBER,NGAYGIAO DATE,GHICHU NVARCHAR2,MSOTHUE varchar2,TENCT NVARCHAR2,DIACHI NVARCHAR2)
return number
as
  RS Number:=0;
begin
    begin
    INSERT INTO "ADMIN"."HOADON" (MA_DONDATHANG, MA_NHANVIEN, MA_TTHD, NGAYGIAOHD, GHICHUHD, MST, TENCONGTY, DIACHICONTY) VALUES (MADDH, MANV, '1', NGAYGIAO, GHICHU, MSOTHUE, TENCT, DIACHI);
    Exception WHEN DUP_VAL_ON_INDEX THEN RS:=1;
    END;
return RS;
end XUAT_HOADON;

/
--------------------------------------------------------
--  Constraints for Table HOADON
--------------------------------------------------------

  ALTER TABLE "ADMIN"."HOADON" MODIFY ("MA_HOADON" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."HOADON" MODIFY ("MA_DONDATHANG" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."HOADON" MODIFY ("MA_NHANVIEN" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."HOADON" MODIFY ("MA_TTHD" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."HOADON" ADD CHECK ("MA_HOADON" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."HOADON" ADD CHECK ("MA_DONDATHANG" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."HOADON" ADD CHECK ("MA_NHANVIEN" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."HOADON" ADD CHECK ("MA_TTHD" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."HOADON" ADD PRIMARY KEY ("MA_HOADON")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
 
  ALTER TABLE "ADMIN"."HOADON" ADD UNIQUE ("MA_DONDATHANG")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table DONDATHANG
--------------------------------------------------------

  ALTER TABLE "ADMIN"."DONDATHANG" MODIFY ("MA_DONDATHANG" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."DONDATHANG" MODIFY ("MA_NHANVIEN" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."DONDATHANG" MODIFY ("MA_KHACHHANG" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."DONDATHANG" MODIFY ("MA_TTDDH" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."DONDATHANG" ADD CHECK ("MA_DONDATHANG" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."DONDATHANG" ADD CHECK ("MA_NHANVIEN" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."DONDATHANG" ADD CHECK ("MA_KHACHHANG" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."DONDATHANG" ADD CHECK ("MA_TTDDH" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."DONDATHANG" ADD PRIMARY KEY ("MA_DONDATHANG")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table LOAISP
--------------------------------------------------------

  ALTER TABLE "ADMIN"."LOAISP" MODIFY ("MA_LOAISP" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."LOAISP" ADD UNIQUE ("TENLOAI")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
 
  ALTER TABLE "ADMIN"."LOAISP" ADD CHECK ("MA_LOAISP" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."LOAISP" ADD PRIMARY KEY ("MA_LOAISP")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table TRANGTHAIHD
--------------------------------------------------------

  ALTER TABLE "ADMIN"."TRANGTHAIHD" MODIFY ("MA_TTHD" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."TRANGTHAIHD" ADD CHECK ("MA_TTHD" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."TRANGTHAIHD" ADD PRIMARY KEY ("MA_TTHD")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table SANPHAM
--------------------------------------------------------

  ALTER TABLE "ADMIN"."SANPHAM" MODIFY ("MA_SANPHAM" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."SANPHAM" MODIFY ("MA_LOAISP" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."SANPHAM" ADD UNIQUE ("TENSANPHAM")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
 
  ALTER TABLE "ADMIN"."SANPHAM" ADD CHECK ("MA_SANPHAM" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."SANPHAM" ADD CHECK ("MA_LOAISP" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."SANPHAM" ADD CHECK ("TRANGTHAIKM" ='Y' OR "TRANGTHAIKM"='N') ENABLE;
 
  ALTER TABLE "ADMIN"."SANPHAM" ADD CHECK ("TRANGTHAIHOT" ='Y' OR "TRANGTHAIHOT"='N') ENABLE;
 
  ALTER TABLE "ADMIN"."SANPHAM" ADD CHECK ("TRANGTHAITOPWEEK" ='Y' OR "TRANGTHAITOPWEEK"='N') ENABLE;
 
  ALTER TABLE "ADMIN"."SANPHAM" ADD CHECK ("TRANGTHAIBAN" ='Y' OR "TRANGTHAIBAN"='N') ENABLE;
 
  ALTER TABLE "ADMIN"."SANPHAM" ADD PRIMARY KEY ("MA_SANPHAM")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table TAG
--------------------------------------------------------

  ALTER TABLE "ADMIN"."TAG" MODIFY ("MA_TAG" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."TAG" ADD CHECK ("MA_TAG" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."TAG" ADD PRIMARY KEY ("MA_TAG")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table KHACHHANG
--------------------------------------------------------

  ALTER TABLE "ADMIN"."KHACHHANG" MODIFY ("MA_KHACHHANG" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."KHACHHANG" ADD CHECK ("MA_KHACHHANG" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."KHACHHANG" ADD CHECK (DIENTHOAI in
	(
	  '[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]',
	  '[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]',
	  '[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]' ,
  	'[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]',
	  NULL
	) ) ENABLE;
 
  ALTER TABLE "ADMIN"."KHACHHANG" ADD PRIMARY KEY ("MA_KHACHHANG")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table TRANGTHAIDDH
--------------------------------------------------------

  ALTER TABLE "ADMIN"."TRANGTHAIDDH" MODIFY ("MA_TTDDH" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."TRANGTHAIDDH" ADD CHECK ("MA_TTDDH" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."TRANGTHAIDDH" ADD PRIMARY KEY ("MA_TTDDH")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table THONGTINWEBSITE
--------------------------------------------------------

  ALTER TABLE "ADMIN"."THONGTINWEBSITE" MODIFY ("MA_THONGTIN" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."THONGTINWEBSITE" ADD CHECK ("MA_THONGTIN" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."THONGTINWEBSITE" ADD PRIMARY KEY ("MA_THONGTIN")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table CHITIETDDH
--------------------------------------------------------

  ALTER TABLE "ADMIN"."CHITIETDDH" MODIFY ("MA_SANPHAM" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."CHITIETDDH" MODIFY ("MA_DONDATHANG" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."CHITIETDDH" ADD CHECK ("MA_SANPHAM" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."CHITIETDDH" ADD CHECK ("MA_DONDATHANG" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."CHITIETDDH" ADD CHECK (SOLUONG >0) ENABLE;
 
  ALTER TABLE "ADMIN"."CHITIETDDH" ADD PRIMARY KEY ("MA_SANPHAM", "MA_DONDATHANG")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table QUYEN
--------------------------------------------------------

  ALTER TABLE "ADMIN"."QUYEN" MODIFY ("MA_QUYEN" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."QUYEN" ADD CHECK ("MA_QUYEN" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."QUYEN" ADD PRIMARY KEY ("MA_QUYEN")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table CHITIETTAG
--------------------------------------------------------

  ALTER TABLE "ADMIN"."CHITIETTAG" MODIFY ("MA_TAG" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."CHITIETTAG" MODIFY ("MA_SANPHAM" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."CHITIETTAG" ADD CHECK ("MA_TAG" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."CHITIETTAG" ADD CHECK ("MA_SANPHAM" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."CHITIETTAG" ADD PRIMARY KEY ("MA_TAG", "MA_SANPHAM")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table NHANVIEN
--------------------------------------------------------

  ALTER TABLE "ADMIN"."NHANVIEN" MODIFY ("MA_NHANVIEN" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."NHANVIEN" MODIFY ("MA_QUYEN" NOT NULL ENABLE);
 
  ALTER TABLE "ADMIN"."NHANVIEN" ADD CHECK ("MA_NHANVIEN" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."NHANVIEN" ADD CHECK ("MA_QUYEN" IS NOT NULL) ENABLE;
 
  ALTER TABLE "ADMIN"."NHANVIEN" ADD PRIMARY KEY ("MA_NHANVIEN")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table CHITIETDDH
--------------------------------------------------------

  ALTER TABLE "ADMIN"."CHITIETDDH" ADD FOREIGN KEY ("MA_SANPHAM")
	  REFERENCES "ADMIN"."SANPHAM" ("MA_SANPHAM") ENABLE;
 
  ALTER TABLE "ADMIN"."CHITIETDDH" ADD FOREIGN KEY ("MA_DONDATHANG")
	  REFERENCES "ADMIN"."DONDATHANG" ("MA_DONDATHANG") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table CHITIETTAG
--------------------------------------------------------

  ALTER TABLE "ADMIN"."CHITIETTAG" ADD FOREIGN KEY ("MA_TAG")
	  REFERENCES "ADMIN"."TAG" ("MA_TAG") ENABLE;
 
  ALTER TABLE "ADMIN"."CHITIETTAG" ADD FOREIGN KEY ("MA_SANPHAM")
	  REFERENCES "ADMIN"."SANPHAM" ("MA_SANPHAM") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table DONDATHANG
--------------------------------------------------------

  ALTER TABLE "ADMIN"."DONDATHANG" ADD FOREIGN KEY ("MA_NHANVIEN")
	  REFERENCES "ADMIN"."NHANVIEN" ("MA_NHANVIEN") ENABLE;
 
  ALTER TABLE "ADMIN"."DONDATHANG" ADD FOREIGN KEY ("MA_KHACHHANG")
	  REFERENCES "ADMIN"."KHACHHANG" ("MA_KHACHHANG") ENABLE;
 
  ALTER TABLE "ADMIN"."DONDATHANG" ADD FOREIGN KEY ("MA_TTDDH")
	  REFERENCES "ADMIN"."TRANGTHAIDDH" ("MA_TTDDH") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table HOADON
--------------------------------------------------------

  ALTER TABLE "ADMIN"."HOADON" ADD FOREIGN KEY ("MA_NHANVIEN")
	  REFERENCES "ADMIN"."NHANVIEN" ("MA_NHANVIEN") ENABLE;
 
  ALTER TABLE "ADMIN"."HOADON" ADD FOREIGN KEY ("MA_DONDATHANG")
	  REFERENCES "ADMIN"."DONDATHANG" ("MA_DONDATHANG") ENABLE;
 
  ALTER TABLE "ADMIN"."HOADON" ADD FOREIGN KEY ("MA_TTHD")
	  REFERENCES "ADMIN"."TRANGTHAIHD" ("MA_TTHD") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table NHANVIEN
--------------------------------------------------------

  ALTER TABLE "ADMIN"."NHANVIEN" ADD FOREIGN KEY ("MA_QUYEN")
	  REFERENCES "ADMIN"."QUYEN" ("MA_QUYEN") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table SANPHAM
--------------------------------------------------------

  ALTER TABLE "ADMIN"."SANPHAM" ADD FOREIGN KEY ("MA_LOAISP")
	  REFERENCES "ADMIN"."LOAISP" ("MA_LOAISP") ENABLE;
